2022-10-14 10:10:17.738 +02:00 INF Application is starting...
2022-10-14 10:10:20.897 +02:00 INF Now listening on: https://localhost:7089
2022-10-14 10:10:20.902 +02:00 INF Now listening on: http://localhost:5089
2022-10-14 10:10:20.905 +02:00 INF Application started. Press Ctrl+C to shut down.
2022-10-14 10:10:20.906 +02:00 INF Hosting environment: Development
2022-10-14 10:10:20.906 +02:00 INF Content root path: D:\projekty\Asp.net advanced\week1\TW\el-proyecte-grande-sprint-1-csharp-adrianzych2\FriendlyGames.Api
2022-10-14 10:10:21.320 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/index.html - -
2022-10-14 10:10:21.929 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/index.html - - - 200 - text/html;charset=utf-8 611.5977ms
2022-10-14 10:10:21.939 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - -
2022-10-14 10:10:21.946 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 7.6310ms
2022-10-14 10:10:22.168 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - -
2022-10-14 10:10:22.329 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 160.6759ms
2022-14-14 10:14:13.826 +02:00 INF Application is starting...
2022-14-14 10:14:15.124 +02:00 INF Now listening on: https://localhost:7089
2022-14-14 10:14:15.127 +02:00 INF Now listening on: http://localhost:5089
2022-14-14 10:14:15.130 +02:00 INF Application started. Press Ctrl+C to shut down.
2022-14-14 10:14:15.130 +02:00 INF Hosting environment: Development
2022-14-14 10:14:15.130 +02:00 INF Content root path: D:\projekty\Asp.net advanced\week1\TW\el-proyecte-grande-sprint-1-csharp-adrianzych2\FriendlyGames.Api
2022-14-14 10:14:15.776 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/index.html - -
2022-14-14 10:14:16.017 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/index.html - - - 200 - text/html;charset=utf-8 243.4069ms
2022-14-14 10:14:16.037 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - -
2022-14-14 10:14:16.042 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.8306ms
2022-14-14 10:14:16.167 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - -
2022-14-14 10:14:16.337 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 170.1373ms
2022-42-14 11:42:40.583 +02:00 INF Application is starting...
2022-42-14 11:42:42.868 +02:00 INF User profile is available. Using 'C:\Users\Damian\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-42-14 11:42:42.995 +02:00 INF Creating key {410b5c9b-ed4e-4618-965e-358f0c7064a0} with creation date 2022-09-14 09:42:42Z, activation date 2022-09-15 14:12:51Z, and expiration date 2022-12-13 09:42:42Z.
2022-42-14 11:42:43.002 +02:00 INF Writing data to file 'C:\Users\Damian\AppData\Local\ASP.NET\DataProtection-Keys\key-410b5c9b-ed4e-4618-965e-358f0c7064a0.xml'.
2022-42-14 11:42:43.869 +02:00 INF Now listening on: https://localhost:7089
2022-42-14 11:42:43.869 +02:00 INF Now listening on: http://localhost:5089
2022-42-14 11:42:43.878 +02:00 INF Application started. Press Ctrl+C to shut down.
2022-42-14 11:42:43.878 +02:00 INF Hosting environment: Development
2022-42-14 11:42:43.878 +02:00 INF Content root path: D:\projekty\Asp.net advanced\week1\TW\el-proyecte-grande-sprint-1-csharp-adrianzych2\FriendlyGames.Api
2022-42-14 11:42:45.290 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger - -
2022-42-14 11:42:45.759 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger - - - 301 0 - 473.9089ms
2022-42-14 11:42:45.770 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/index.html - -
2022-42-14 11:42:46.128 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/index.html - - - 200 - text/html;charset=utf-8 357.7989ms
2022-42-14 11:42:46.162 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/swagger-ui-standalone-preset.js - -
2022-42-14 11:42:46.163 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - -
2022-42-14 11:42:46.163 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/swagger-ui.css - -
2022-42-14 11:42:46.163 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/swagger-ui-bundle.js - -
2022-42-14 11:42:46.169 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 6.4371ms
2022-42-14 11:42:46.223 +02:00 INF Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-42-14 11:42:46.223 +02:00 INF Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-42-14 11:42:46.223 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 61.1241ms
2022-42-14 11:42:46.223 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/swagger-ui.css - - - 200 143943 text/css 60.2852ms
2022-42-14 11:42:46.244 +02:00 INF Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-42-14 11:42:46.244 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/swagger-ui-bundle.js - - - 200 1096145 application/javascript 81.2340ms
2022-42-14 11:42:46.497 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - -
2022-42-14 11:42:46.522 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/favicon-32x32.png - -
2022-42-14 11:42:46.523 +02:00 INF Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-42-14 11:42:46.523 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/favicon-32x32.png - - - 200 628 image/png 0.4499ms
2022-42-14 11:42:46.725 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 227.9471ms
2022-43-14 11:43:47.031 +02:00 INF Request starting HTTP/2 OPTIONS https://localhost:7089/api/Users/register application/json-patch+json 149
2022-43-14 11:43:47.034 +02:00 INF CORS policy execution failed.
2022-43-14 11:43:47.035 +02:00 INF Request origin https://localhost:7089 does not have permission to access the resource.
2022-43-14 11:43:47.416 +02:00 INF Executing endpoint 'FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api)'
2022-43-14 11:43:47.441 +02:00 INF Route matched with {action = "RegisterApiUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterApiUser(FriendlyGames.Api.Dtos.RegisterApiUserDto) on controller FriendlyGames.Api.Controllers.UsersController (FriendlyGames.Api).
2022-43-14 11:43:47.840 +02:00 INF Executed action FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api) in 395.0787ms
2022-43-14 11:43:47.843 +02:00 INF Executed endpoint 'FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api)'
2022-43-14 11:43:47.844 +02:00 ERR An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'FriendlyGames.Api.Infrastructure.IAuthenticationManager' while attempting to activate 'FriendlyGames.Api.Controllers.UsersController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method10(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-43-14 11:43:47.920 +02:00 INF Request finished HTTP/2 OPTIONS https://localhost:7089/api/Users/register application/json-patch+json 149 - 500 - text/plain;+charset=utf-8 888.8105ms
2022-44-14 11:44:48.414 +02:00 INF Application is starting...
2022-44-14 11:44:49.009 +02:00 INF User profile is available. Using 'C:\Users\Damian\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-44-14 11:44:49.541 +02:00 INF Now listening on: https://localhost:7089
2022-44-14 11:44:49.541 +02:00 INF Now listening on: http://localhost:5089
2022-44-14 11:44:49.543 +02:00 INF Application started. Press Ctrl+C to shut down.
2022-44-14 11:44:49.543 +02:00 INF Hosting environment: Development
2022-44-14 11:44:49.543 +02:00 INF Content root path: D:\projekty\Asp.net advanced\week1\TW\el-proyecte-grande-sprint-1-csharp-adrianzych2\FriendlyGames.Api
2022-44-14 11:44:51.475 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/index.html - -
2022-44-14 11:44:51.857 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/index.html - - - 200 - text/html;charset=utf-8 385.9349ms
2022-44-14 11:44:51.894 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - -
2022-44-14 11:44:51.902 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 8.0219ms
2022-44-14 11:44:52.185 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - -
2022-44-14 11:44:52.317 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.5372ms
2022-45-14 11:45:48.543 +02:00 INF Request starting HTTP/2 OPTIONS https://localhost:7089/api/Users/register application/json-patch+json 149
2022-45-14 11:45:48.550 +02:00 INF CORS policy execution failed.
2022-45-14 11:45:48.550 +02:00 INF Request origin https://localhost:7089 does not have permission to access the resource.
2022-45-14 11:45:48.644 +02:00 INF Executing endpoint 'FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api)'
2022-45-14 11:45:48.667 +02:00 INF Route matched with {action = "RegisterApiUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterApiUser(FriendlyGames.Api.Dtos.RegisterApiUserDto) on controller FriendlyGames.Api.Controllers.UsersController (FriendlyGames.Api).
2022-45-14 11:45:49.284 +02:00 INF RegisterApiUser called...
2022-45-14 11:45:49.284 +02:00 INF Registration attempt for jdoe@example.com
2022-45-14 11:45:50.101 +02:00 WRN Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2022-45-14 11:45:50.379 +02:00 INF Entity Framework Core 6.0.9 initialized 'FriendlyGamesDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: SensitiveDataLoggingEnabled 
2022-45-14 11:45:51.440 +02:00 INF Executed DbCommand (80ms) [Parameters=[@__normalizedUserName_0='JDOE@EXAMPLE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-45-14 11:45:51.519 +02:00 INF Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='JDOE@EXAMPLE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-45-14 11:45:51.726 +02:00 INF Executed DbCommand (4ms) [Parameters=[@p0='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Nullable = false) (Size = 450), @p1='0', @p2='b8b1d754-3e30-4567-9ae3-f127b3e96d5d' (Size = 4000), @p3='jdoe@example.com' (Size = 256), @p4='False', @p5='Joe' (Nullable = false) (Size = 4000), @p6='Doe' (Nullable = false) (Size = 4000), @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9='JDOE@EXAMPLE.COM' (Size = 256), @p10='JDOE@EXAMPLE.COM' (Size = 256), @p11='AQAAAAEAACcQAAAAEJyPuoMa4QRzhqMwI6uxNLUKb9l26rY1zUVO5IUBtRdTQO3Tb7pXj1wCxHzt8aZjRQ==' (Size = 4000), @p12=NULL (Size = 4000), @p13='False', @p14='YDYZ4JMYT26D2PXBCBQMDI5AMNHSVRAN' (Size = 4000), @p15='False', @p16='jdoe@example.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2022-45-14 11:45:51.780 +02:00 INF Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-45-14 11:45:51.823 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__p_0='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Size = 450), @__p_1='44507b65-7943-422d-b43f-5296cf9d396d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2022-45-14 11:45:51.832 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-45-14 11:45:51.846 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='USER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-45-14 11:45:51.851 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__p_0='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Size = 450), @__p_1='01277cac-ff43-44e2-a4bb-0691e4e70f2a' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2022-45-14 11:45:51.852 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='USER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-45-14 11:45:51.859 +02:00 INF Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='JDOE@EXAMPLE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-45-14 11:45:51.867 +02:00 INF Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='JDOE@EXAMPLE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-45-14 11:45:51.886 +02:00 INF Executed DbCommand (1ms) [Parameters=[@p0='01277cac-ff43-44e2-a4bb-0691e4e70f2a' (Nullable = false) (Size = 450), @p1='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2022-45-14 11:45:51.888 +02:00 INF Executed DbCommand (0ms) [Parameters=[@p0='44507b65-7943-422d-b43f-5296cf9d396d' (Nullable = false) (Size = 450), @p1='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2022-45-14 11:45:51.897 +02:00 INF Executed DbCommand (4ms) [Parameters=[@p16='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Nullable = false) (Size = 450), @p0='0', @p1='987f3539-1001-4eb1-b9da-32053eed0380' (Size = 4000), @p17='b8b1d754-3e30-4567-9ae3-f127b3e96d5d' (Size = 4000), @p2='jdoe@example.com' (Size = 256), @p3='False', @p4='Joe' (Nullable = false) (Size = 4000), @p5='Doe' (Nullable = false) (Size = 4000), @p6='True', @p7=NULL (DbType = DateTimeOffset), @p8='JDOE@EXAMPLE.COM' (Size = 256), @p9='JDOE@EXAMPLE.COM' (Size = 256), @p10='AQAAAAEAACcQAAAAEJyPuoMa4QRzhqMwI6uxNLUKb9l26rY1zUVO5IUBtRdTQO3Tb7pXj1wCxHzt8aZjRQ==' (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13='YDYZ4JMYT26D2PXBCBQMDI5AMNHSVRAN' (Size = 4000), @p14='False', @p15='jdoe@example.com' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2022-45-14 11:45:51.912 +02:00 INF Executing AcceptedResult, writing value of type 'null'.
2022-45-14 11:45:51.918 +02:00 INF Executed action FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api) in 3246.1751ms
2022-45-14 11:45:51.919 +02:00 INF Executed endpoint 'FriendlyGames.Api.Controllers.UsersController.RegisterApiUser (FriendlyGames.Api)'
2022-45-14 11:45:51.928 +02:00 INF Request finished HTTP/2 OPTIONS https://localhost:7089/api/Users/register application/json-patch+json 149 - 202 0 - 3385.8973ms
2022-48-14 11:48:32.745 +02:00 INF Request starting HTTP/2 OPTIONS https://localhost:7089/api/Users/login application/json-patch+json 60
2022-48-14 11:48:32.750 +02:00 INF CORS policy execution failed.
2022-48-14 11:48:32.755 +02:00 INF Request origin https://localhost:7089 does not have permission to access the resource.
2022-48-14 11:48:32.759 +02:00 INF Executing endpoint 'FriendlyGames.Api.Controllers.UsersController.LoginApiUser (FriendlyGames.Api)'
2022-48-14 11:48:32.761 +02:00 INF Route matched with {action = "LoginApiUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginApiUser(FriendlyGames.Api.Dtos.LoginApiUserDto) on controller FriendlyGames.Api.Controllers.UsersController (FriendlyGames.Api).
2022-48-14 11:48:32.764 +02:00 INF LoginApiUser called...
2022-48-14 11:48:32.764 +02:00 INF Login attempt for jdoe@example.com
2022-48-14 11:48:32.801 +02:00 INF Entity Framework Core 6.0.9 initialized 'FriendlyGamesDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: SensitiveDataLoggingEnabled 
2022-48-14 11:48:32.803 +02:00 INF Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='JDOE@EXAMPLE.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-48-14 11:48:32.898 +02:00 INF Executed DbCommand (6ms) [Parameters=[@__userId_0='a4f451a4-e0e6-4c01-bf3a-db667a7e74ed' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-48-14 11:48:33.126 +02:00 INF Executing AcceptedResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-48-14 11:48:33.167 +02:00 INF Executed action FriendlyGames.Api.Controllers.UsersController.LoginApiUser (FriendlyGames.Api) in 405.2689ms
2022-48-14 11:48:33.167 +02:00 INF Executed endpoint 'FriendlyGames.Api.Controllers.UsersController.LoginApiUser (FriendlyGames.Api)'
2022-48-14 11:48:33.167 +02:00 INF Request finished HTTP/2 OPTIONS https://localhost:7089/api/Users/login application/json-patch+json 60 - 202 431 application/json;+charset=utf-8 422.0067ms
2022-50-14 11:50:10.947 +02:00 INF Application is starting...
2022-50-14 11:50:11.793 +02:00 INF User profile is available. Using 'C:\Users\Damian\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-50-14 11:50:12.128 +02:00 INF Now listening on: https://localhost:7089
2022-50-14 11:50:12.128 +02:00 INF Now listening on: http://localhost:5089
2022-50-14 11:50:12.131 +02:00 INF Application started. Press Ctrl+C to shut down.
2022-50-14 11:50:12.131 +02:00 INF Hosting environment: Development
2022-50-14 11:50:12.131 +02:00 INF Content root path: D:\projekty\Asp.net advanced\week1\TW\el-proyecte-grande-sprint-1-csharp-adrianzych2\FriendlyGames.Api
2022-50-14 11:50:12.917 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/index.html - -
2022-50-14 11:50:13.244 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/index.html - - - 200 - text/html;charset=utf-8 330.8962ms
2022-50-14 11:50:13.271 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - -
2022-50-14 11:50:13.276 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.9818ms
2022-50-14 11:50:13.483 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - -
2022-50-14 11:50:13.637 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 153.8725ms
2022-50-14 11:50:44.483 +02:00 INF Request starting HTTP/2 GET https://localhost:7089/api/Events - -
2022-50-14 11:50:44.591 +02:00 INF Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2022-50-14 11:50:44.598 +02:00 INF AuthenticationScheme: Bearer was challenged.
2022-50-14 11:50:44.598 +02:00 INF Request finished HTTP/2 GET https://localhost:7089/api/Events - - - 401 0 - 115.2209ms
2022-50-14 11:50:57.470 +02:00 INF Request starting HTTP/1.1 GET https://localhost:7089/api/Events application/json 157
2022-50-14 11:50:57.716 +02:00 INF Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: 'System.Text.StringBuilder'.
Exceptions caught:
 'System.Text.StringBuilder'.
token: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-50-14 11:50:57.747 +02:00 INF Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: 'System.Text.StringBuilder'.
Exceptions caught:
 'System.Text.StringBuilder'.
token: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2022-50-14 11:50:57.748 +02:00 INF Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2022-50-14 11:50:57.749 +02:00 INF AuthenticationScheme: Bearer was challenged.
2022-50-14 11:50:57.756 +02:00 INF Request finished HTTP/1.1 GET https://localhost:7089/api/Events application/json 157 - 401 0 - 286.0154ms
2022-51-14 11:51:29.437 +02:00 INF Request starting HTTP/1.1 GET https://localhost:7089/api/Events application/json 157
2022-51-14 11:51:29.475 +02:00 INF Executing endpoint 'FriendlyGames.Api.Controllers.EventsController.GetEvents (FriendlyGames.Api)'
2022-51-14 11:51:29.503 +02:00 INF Route matched with {action = "GetEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[FriendlyGames.Api.Dtos.EventsDto]]] GetEvents(System.Nullable`1[System.Int32], System.String, System.String, System.String, System.String) on controller FriendlyGames.Api.Controllers.EventsController (FriendlyGames.Api).
2022-51-14 11:51:29.845 +02:00 INF GetEvents called...
2022-51-14 11:51:30.557 +02:00 WRN Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2022-51-14 11:51:30.837 +02:00 INF Entity Framework Core 6.0.9 initialized 'FriendlyGamesDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: SensitiveDataLoggingEnabled 
2022-51-14 11:51:31.786 +02:00 INF Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[ApiUserId], [e].[City], [e].[Description], [e].[EndDateTime], [e].[EventCategoryId], [e].[LevelCategoryId], [e].[MaxNumberOfPlayers], [e].[Name], [e].[PriceForEvent], [e].[StartDateTime], [e].[Street], [e].[SurfaceCategoryId], [e].[SurroundingCategoryId], [e0].[Id], [r].[EventId], [r].[ApiUserId], [r].[RegistrationDateTime], [e0].[ImageForBoxWithEventInfo], [e0].[ImageForSearchBar], [e0].[Name]
FROM [Events] AS [e]
INNER JOIN [EventCategories] AS [e0] ON [e].[EventCategoryId] = [e0].[Id]
LEFT JOIN [Registrations] AS [r] ON [e].[Id] = [r].[EventId]
ORDER BY [e].[Id], [e0].[Id], [r].[EventId]
2022-51-14 11:51:31.864 +02:00 INF Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FriendlyGames.Api.Dtos.EventsDto, FriendlyGames.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-51-14 11:51:31.958 +02:00 INF Executed action FriendlyGames.Api.Controllers.EventsController.GetEvents (FriendlyGames.Api) in 2450.1042ms
2022-51-14 11:51:31.959 +02:00 INF Executed endpoint 'FriendlyGames.Api.Controllers.EventsController.GetEvents (FriendlyGames.Api)'
2022-51-14 11:51:31.970 +02:00 INF Request finished HTTP/1.1 GET https://localhost:7089/api/Events application/json 157 - 200 2 application/json;+charset=utf-8 2534.0081ms
